<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Github Pages + Github Issues + Github Actions 自动发布静态博客</title><meta name=description content><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://blog.isayme.org/index.xml title="BLOG - ISAYME"><meta name=twitter:card content="summary"><meta name=twitter:title content="Github Pages + Github Issues + Github Actions 自动发布静态博客"><meta name=twitter:description content="背景  使用 Github Isssue 记录文章; 使用 Github Pages 发布静态站点;  目标 当 Github Isssue 新建或更新后, 自动将 Isssue 发布到 Github Pages."><link rel=stylesheet href=https://blog.isayme.org/fontawesome/css/all.min.css><link crossorigin=anonymous href=/css/styles.min.css integrity rel="preload stylesheet" as=style><link rel=stylesheet href=https://blog.isayme.org/css/custom.css><link id=dark-mode-theme crossorigin=anonymous href=/css/dark.min.css integrity rel="preload stylesheet" as=style><script>var darkTheme=document.getElementById('dark-mode-theme')
var storedTheme=localStorage.getItem('dark-mode-storage')
if(storedTheme==='dark'){darkTheme.disabled=false}else if(storedTheme==='light'){darkTheme.disabled=true}</script><script defer crossorigin=anonymous src=/js/theme.js integrity></script><script defer crossorigin=anonymous src=/js/instantpage.min.js integrity></script><meta name=generator content="Hugo 0.78.1"></head><body><header><nav class=navbar><div class=nav><ul class=nav-links></ul></div></nav><div class=intro-header><div class=container><div class=posts-heading><h1>Github Pages + Github Issues + Github Actions 自动发布静态博客</h1></div></div></div></header><div class=container role=main><article class=article class=blog-post><h1 id=背景>背景</h1><ol><li>使用 Github Isssue 记录文章;</li><li>使用 Github Pages 发布静态站点;</li></ol><h1 id=目标>目标</h1><p>当 Github Isssue 新建或更新后, 自动将 Isssue 发布到 Github Pages.</p><h1 id=方案>方案</h1><ol><li>Github Issue 新建/更新后, 触发 Github Actions, 将 Issue 内容在 master 分支 更新到 <code>content/posts/</code> 目录, 并 git push 到远端.</li><li>master 分支的提交再次触发 Github Actions, 执行静态博客构建命令, 并 git push 到 <code>gh-pages</code> 分支.</li></ol><p>两步分别对应Github Workflow: <a href=https://github.com/isayme/blog/blob/master/.github/workflows/issue-event.yml>https://github.com/isayme/blog/blob/master/.github/workflows/issue-event.yml</a> 和 <a href=https://github.com/isayme/blog/blob/master/.github/workflows/gh-pages.yml>https://github.com/isayme/blog/blob/master/.github/workflows/gh-pages.yml</a></p><h1 id=问题及解决>问题及解决</h1><h2 id=使用-github_token-时无法-trigger-新的-workflow>使用 GITHUB_TOKEN 时无法 trigger 新的 workflow</h2><p>官方说明见: <a href=https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows>https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows</a></p><pre><code>Note: You cannot trigger new workflow runs using the GITHUB_TOKEN. For more information, see &quot;[Triggering new workflows using a personal access token](https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#triggering-new-workflows-using-a-personal-access-token).&quot;
</code></pre><p>解决办法: 创建一个 Personal Token, 提交 Issue 信息到 master 分支时使用此 token.</p></article></div><footer><div class=social-icons></div><div class=container><p class="credits copyright"><a href=https://blog.isayme.org/about></a>&nbsp;&copy;
2024
&nbsp;/&nbsp;
<a href=https://blog.isayme.org/>BLOG - ISAYME</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>